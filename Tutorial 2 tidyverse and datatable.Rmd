---
title: "Tutorial 2: tidyverse and datatable"
author: Hause Lin
output: 
    github_document:
        toc: true
        # toc_float: false
        # theme: lumen
        # highlight: tango
editor_options: 
  chunk_output_type: inline
---

```{r loading packages, results="hide", message=FALSE, warning=FALSE}
library(tidyverse); library(data.table); library(broom); library(dtplyr); library(lme4); library(lmerTest); library(ggbeeswarm); library(cowplot)
```

## Reading data into R

Read file in a directory and save the data as an object in the environment by using the assignment `<-` operator. 

```{r, results="hide", message=FALSE, warning=FALSE}
df1 <- read.csv("./Data/sleep.csv") # base R read.csv() function
# same as df1 <- read.csv("Data/sleep.csv")
# READ: assign the output read.csv("Data/sleep.csv") into df1

df2 <- fread("./Data/sleep.csv") # fread() from library(data.table)
# same as df2 <- fread("Data/sleep.csv")

# my favorite way of reading data: combining tbl_dt() and fread()
df3 <- tbl_dt(fread("./Data/sleep.csv")) # tbl_dt() from library(dtplyr)
# same as df3 <- tbl_dt(fread("Data/sleep.csv"))
```

The `.` in the file path simply refers to the current working directory, so it can be dropped. And `..` can be used to refer to the parent directory.

## Comparing the outputs of read.csv(x), fread(x), and tbl_dt(fread(x))

```{r}
df1 # read.csv("./Data/sleep.csv")
class(df1) # read.csv("./Data/sleep.csv")
```

```{r}
df2 # fread("./Data/sleep.csv") # fread() from library(data.table)
class(df2) # fread("./Data/sleep.csv") # fread() from library(data.table)
```

How's the output different from the one above?

```{r}
df3 # tbl_dt(fread("./Data/sleep.csv")) # tbl_dt() from library(dtplyr)
class(df3) # tbl_dt(fread("./Data/sleep.csv")) # tbl_dt() from library(dtplyr)
```

How's the output different from the two outputs above?

### Reading URLs and other formats

Check out the csv (comma separated values) data [here](https://raw.githubusercontent.com/hauselin/RDataScience/master/Data/sleep.csv). You can read data directly off a website.

Most of these read functions can import/read different types of files (e.g., csv, txt, URLs) as long as the raw data are formatted properly (e.g., separated by commas, tabs). But if you're trying to read proprietary data formats (e.g., SPSS datasets, Excel sheets), you'll need to use other libraries (e.g., `readxl`, `foreign`) to read those data into R.

```{r}
df_url <- tbl_dt(fread("https://raw.githubusercontent.com/hauselin/RDataScience/master/Data/sleep.csv"))
df_url # print data to console; same dataset as tbl_dt(fread("./Data/sleep.csv"))
```

