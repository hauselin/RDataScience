---
title: "Intro to data analysis with data.table package"
output: html_notebook
---

# data.table magic

---

### set up your RStudio environment

Forget about **objects**, **variables**, **functions**, and all that programming jargon. Let's dive straight into data analysis! Before we begin each R session, you need to set up your **environment** (I'll try to boldface all technical terms/jargon the first time I use them). 

Anytime you need help with a function, type ? in front of the function name and run it in the console. Try tryping these one by one in the Console: `?rm`, `?mean`, `?library`, `?setwd`, `?getwd`

```{r set up environment}
rm(list = ls()) # clear environment
setwd("/Users/Hause/Dropbox/Working Projects/RDataScience/R Basics/") # set working directory
library(data.table) # load packages
```

Line-by-line detailed explanation

1. `rm(list = ls())`: removes/clears ALL objects from your environment
    * `rm()` is a function to **r**e**m**ove objects in your environment
    * `ls()` is a function to **print** or **l**i**s**t the objects in your environment
    * so if you put `ls()` inside `rm()`, you're basically **calling** two functions (nested functions) this way: first get me all the objects in the environment (via `ls()`), then remove all of these objects (via `rm()`), hence `rm(list = ls())`
2. `setwd("/Users/Hause/Dropbox/Working Projects/RDataScience/R Basics/")`: sets your **current working directory**
    * Use the keyboard shortcut Ctrl+Shift+H to select your working directory with your mouse. When you're done, you should see the `setwd()` line of code printed in your Console. Copy that line of code (without the prompt >) from your Console to your R script.
3. `library(data.table)`: loads **library**
    * You can load multiple libraries; ones I commonly use load at the top of my script (in this manner): `library(tidyverse); library(data.table); library(broom); library(dtplyr); library(lme4); library(lmerTest); library(ggbeeswarm); library(cowplot)`


### loading datasets
R has many built-in datasets. We'll use a few of them along the way. To see what's available, type `data()` in your Console to see them. 

```{r}
?sleep # 
d <- data.table(sleep) 
class(d)
d
```


```{r}
d <- fread("./Datasets/sleep.csv")
```


### data.table syntax: data.table[i, j, by, .SDcols] 

`data.table` is an extremely flexible and powerful library/package. I think it should be in every data scientist's toolkit; and anyone who analyses data in R should know both `data.table` and `dplyr` (part of `tidyverse`) really well.

`data.table` uses very concise syntax (i.e., the way to express yourself) to perform powerful computations really quickly and flexibly. First, you need to understand its syntax: `data.table [i, j, by, .SDcols]`

* `i`: **filter** or **subset** rows/observations
* `j`: **select** particular columns/variables and apply any conceivable function to that column (or columns) 
* `by`: where all the magic happens; applies functions (specified in `j`) separately to different groups in your data
* `.SDcols`: applies functions (specified in `j`) to only a **s**ubset of the **d**atatable **col**umns

```{r}
d


```

# t.test

```{r}
model_ttest <- t.test(formula = extra ~ group, data = d) # or simply t.test(extra ~ group, d)
model_ttest
```

```{r}
source("https://raw.githubusercontent.com/hauselin/Rcode/master/summaryh.R")
summaryh(model_ttest)
```

```{r}
model_lm <- lm(extra ~ group, d)
summary(model_lm)
summaryh(model_lm)
```

```{r}
model_ttestOneSample <- t.test(d[group == "1", extra], mu = 0)
model_ttestOneSample
summaryh(model_ttestOneSample)
```

